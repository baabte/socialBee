!function(){"use strict";var a={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,isControl:function(b){var c=b.which;switch(c){case a.COMMAND:case a.SHIFT:case a.CTRL:case a.ALT:return!0}return b.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a},isVerticalMovement:function(b){return~[a.UP,a.DOWN].indexOf(b)},isHorizontalMovement:function(b){return~[a.LEFT,a.RIGHT,a.BACKSPACE,a.DELETE].indexOf(b)}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(a){return angular.element(this[0].querySelectorAll(a))}),angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,placeholder:"",refreshDelay:1e3}).service("uiSelectMinErr",function(){var a=angular.$$minErr("ui.select");return function(){var b=a.apply(this,arguments),c=b.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(c)}}).service("RepeatParser",["uiSelectMinErr","$parse",function(a,b){var c=this;c.parse=function(c){var d=c.match(/^\s*(?:([\s\S]+?)\s+as\s+)?([\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",c);return{itemName:d[2],source:b(d[3]),trackByExp:d[4],modelMapper:b(d[1]||d[2])}},c.getGroupNgRepeatExpression=function(){return"$group in $select.groups"},c.getNgRepeatExpression=function(a,b,c,d){var e=a+" in "+(d?"$group.items":b);return c&&(e+=" track by "+c),e}}]).controller("uiSelectCtrl",["$scope","$element","$timeout","RepeatParser","uiSelectMinErr",function(b,c,d,e,f){function g(){l.resetSearchInput&&(l.search=m,l.selected&&l.items.length&&!l.multiple&&(l.activeIndex=l.items.indexOf(l.selected)))}function h(b){var c=!0;switch(b){case a.DOWN:!l.open&&l.multiple?l.activate(!1,!0):l.activeIndex<l.items.length-1&&l.activeIndex++;break;case a.UP:!l.open&&l.multiple?l.activate(!1,!0):l.activeIndex>0&&l.activeIndex--;break;case a.TAB:(!l.multiple||l.open)&&l.select(l.items[l.activeIndex],!0);break;case a.ENTER:l.open?l.select(l.items[l.activeIndex]):l.activate(!1,!0);break;case a.ESC:l.close();break;default:c=!1}return c}function i(b){function c(){switch(b){case a.LEFT:return~l.activeMatchIndex?k:g;case a.RIGHT:return~l.activeMatchIndex&&h!==g?i:(l.activate(),!1);case a.BACKSPACE:return~l.activeMatchIndex?(l.removeChoice(h),k):g;case a.DELETE:return~l.activeMatchIndex?(l.removeChoice(l.activeMatchIndex),h):!1}}var d=j(n[0]),e=l.selected.length,f=0,g=e-1,h=l.activeMatchIndex,i=l.activeMatchIndex+1,k=l.activeMatchIndex-1,m=h;return d>0||l.search.length&&b==a.RIGHT?!1:(l.close(),m=c(),l.activeMatchIndex=l.selected.length&&m!==!1?Math.min(g,Math.max(f,m)):-1,!0)}function j(a){return angular.isNumber(a.selectionStart)?a.selectionStart:a.value.length}function k(){var a=c.querySelectorAll(".ui-select-choices-content"),b=a.querySelectorAll(".ui-select-choices-row");if(b.length<1)throw f("choices","Expected multiple .ui-select-choices-row but got '{0}'.",b.length);var d=b[l.activeIndex],e=d.offsetTop+d.clientHeight-a[0].scrollTop,g=a[0].offsetHeight;e>g?a[0].scrollTop+=e-g:e<d.clientHeight&&(l.isGrouped&&0===l.activeIndex?a[0].scrollTop=0:a[0].scrollTop-=d.clientHeight-e)}var l=this,m="";l.placeholder=void 0,l.search=m,l.activeIndex=0,l.activeMatchIndex=-1,l.items=[],l.selected=void 0,l.open=!1,l.focus=!1,l.focusser=void 0,l.disabled=void 0,l.searchEnabled=void 0,l.resetSearchInput=void 0,l.refreshDelay=void 0,l.multiple=!1,l.disableChoiceExpression=void 0,l.isEmpty=function(){return angular.isUndefined(l.selected)||null===l.selected||""===l.selected};var n=c.querySelectorAll("input.ui-select-search");if(1!==n.length)throw f("searchInput","Expected 1 input.ui-select-search but got '{0}'.",n.length);l.activate=function(a,b){l.disabled||l.open||(b||g(),l.focusser.prop("disabled",!0),l.open=!0,l.activeMatchIndex=-1,l.activeIndex=l.activeIndex>=l.items.length?0:l.activeIndex,d(function(){l.search=a||l.search,n[0].focus()}))},l.findGroupByName=function(a){return l.groups&&l.groups.filter(function(b){return b.name===a})[0]},l.parseRepeatAttr=function(a,c){function d(a){l.groups=[],angular.forEach(a,function(a){var d=b.$eval(c),e=angular.isFunction(d)?d(a):a[d],f=l.findGroupByName(e);f?f.items.push(a):l.groups.push({name:e,items:[a]})}),l.items=[],l.groups.forEach(function(a){l.items=l.items.concat(a.items)})}function g(a){l.items=a}var h=c?d:g;l.parserResult=e.parse(a),l.isGrouped=!!c,l.itemProperty=l.parserResult.itemName,b.$watchCollection(l.parserResult.source,function(a){if(void 0===a||null===a)l.items=[];else{if(!angular.isArray(a))throw f("items","Expected an array but got '{0}'.",a);if(l.multiple){var b=a.filter(function(a){return l.selected.indexOf(a)<0});h(b)}else h(a);l.ngModel.$modelValue=null}}),l.multiple&&b.$watchCollection("$select.selected",function(a){var c=l.parserResult.source(b);if(a.length){var d=c.filter(function(b){return a.indexOf(b)<0});h(d)}else h(c);l.sizeSearchInput()})};var o;l.refresh=function(a){void 0!==a&&(o&&d.cancel(o),o=d(function(){b.$eval(a)},l.refreshDelay))},l.setActiveItem=function(a){l.activeIndex=l.items.indexOf(a)},l.isActive=function(a){return l.open&&l.items.indexOf(a[l.itemProperty])===l.activeIndex},l.isDisabled=function(a){if(l.open){var b,c=l.items.indexOf(a[l.itemProperty]),d=!1;return c>=0&&!angular.isUndefined(l.disableChoiceExpression)&&(b=l.items[c],d=!!a.$eval(l.disableChoiceExpression),b._uiSelectChoiceDisabled=d),d}},l.select=function(a,c){if(void 0===a||!a._uiSelectChoiceDisabled){var d={};d[l.parserResult.itemName]=a,l.onSelectCallback(b,{$item:a,$model:l.parserResult.modelMapper(b,d)}),l.multiple?(l.selected.push(a),l.sizeSearchInput()):l.selected=a,l.close(c)}},l.close=function(a){l.open&&(g(),l.open=!1,l.multiple||d(function(){l.focusser.prop("disabled",!1),a||l.focusser[0].focus()},0,!1))},l.toggle=function(a){l.open?l.close():l.activate(),a.preventDefault(),a.stopPropagation()},l.removeChoice=function(a){var c=l.selected[a],d={};d[l.parserResult.itemName]=c,l.selected.splice(a,1),l.activeMatchIndex=-1,l.sizeSearchInput(),l.onRemoveCallback(b,{$item:c,$model:l.parserResult.modelMapper(b,d)})},l.getPlaceholder=function(){return l.multiple&&l.selected.length?void 0:l.placeholder};var p;l.sizeSearchInput=function(){var a=n[0],c=n.parent().parent()[0];n.css("width","10px");var e=function(){var b=c.clientWidth-a.offsetLeft-10;50>b&&(b=c.clientWidth),n.css("width",b+"px")};d(function(){0!==c.clientWidth||p?p||e():p=b.$watch(function(){return c.clientWidth},function(a){0!==a&&(e(),p(),p=null)})},0,!1)},n.on("keydown",function(c){var d=c.which;b.$apply(function(){var b=!1;l.multiple&&a.isHorizontalMovement(d)&&(b=i(d)),!b&&l.items.length>0&&(b=h(d)),b&&d!=a.TAB&&(c.preventDefault(),c.stopPropagation())}),a.isVerticalMovement(d)&&l.items.length>0&&k()}),n.on("blur",function(){d(function(){l.activeMatchIndex=-1})}),b.$on("$destroy",function(){n.off("keydown blur")})}]).directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","$compile","$parse",function(b,c,d,e,f){return{restrict:"EA",templateUrl:function(a,b){var d=b.theme||c.theme;return d+(angular.isDefined(b.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",link:function(c,g,h,i,j){function k(a){var b=!1;b=window.jQuery?window.jQuery.contains(g[0],a.target):g[0].contains(a.target),b||(l.close(),c.$digest())}var l=i[0],m=i[1],n=g.querySelectorAll("input.ui-select-search");l.multiple=angular.isDefined(h.multiple)?""===h.multiple?!0:"true"===h.multiple.toLowerCase():!1,l.onSelectCallback=f(h.onSelect),l.onRemoveCallback=f(h.onRemove),m.$parsers.unshift(function(a){var b,d={};if(l.multiple){for(var e=[],f=l.selected.length-1;f>=0;f--)d={},d[l.parserResult.itemName]=l.selected[f],b=l.parserResult.modelMapper(c,d),e.unshift(b);return e}return d={},d[l.parserResult.itemName]=a,b=l.parserResult.modelMapper(c,d)}),m.$formatters.unshift(function(a){var b,d=l.parserResult.source(c,{$select:{search:""}}),e={};if(d){if(l.multiple){var f=[],g=function(a,d){if(a&&a.length){for(var g=a.length-1;g>=0;g--)if(e[l.parserResult.itemName]=a[g],b=l.parserResult.modelMapper(c,e),b==d)return f.unshift(a[g]),!0;return!1}};if(!a)return f;for(var h=a.length-1;h>=0;h--)g(l.selected,a[h])||g(d,a[h]);return f}var i=function(d){return e[l.parserResult.itemName]=d,b=l.parserResult.modelMapper(c,e),b==a};if(l.selected&&i(l.selected))return l.selected;for(var j=d.length-1;j>=0;j--)if(i(d[j]))return d[j]}return a}),l.ngModel=m;var o=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' aria-haspopup='true' role='button' />");h.tabindex&&h.$observe("tabindex",function(a){l.multiple?n.attr("tabindex",a):o.attr("tabindex",a),g.removeAttr("tabindex")}),e(o)(c),l.focusser=o,l.multiple||(g.append(o),o.bind("focus",function(){c.$evalAsync(function(){l.focus=!0})}),o.bind("blur",function(){c.$evalAsync(function(){l.focus=!1})}),o.bind("keydown",function(b){return b.which===a.BACKSPACE?(b.preventDefault(),b.stopPropagation(),l.select(void 0),void c.$apply()):void(b.which===a.TAB||a.isControl(b)||a.isFunctionKey(b)||b.which===a.ESC||((b.which==a.DOWN||b.which==a.UP||b.which==a.ENTER||b.which==a.SPACE)&&(b.preventDefault(),b.stopPropagation(),l.activate()),c.$digest()))}),o.bind("keyup input",function(b){b.which===a.TAB||a.isControl(b)||a.isFunctionKey(b)||b.which===a.ESC||b.which==a.ENTER||b.which===a.BACKSPACE||(l.activate(o.val()),o.val(""),c.$digest())})),c.$watch("searchEnabled",function(){var a=c.$eval(h.searchEnabled);l.searchEnabled=void 0!==a?a:!0}),h.$observe("disabled",function(){l.disabled=void 0!==h.disabled?h.disabled:!1}),h.$observe("resetSearchInput",function(){var a=c.$eval(h.resetSearchInput);l.resetSearchInput=void 0!==a?a:!0}),l.multiple?(c.$watchCollection(function(){return m.$modelValue},function(a,b){b!=a&&(m.$modelValue=null)}),c.$watchCollection("$select.selected",function(){m.$setViewValue(Date.now())}),o.prop("disabled",!0)):c.$watch("$select.selected",function(a){m.$viewValue!==a&&m.$setViewValue(a)}),m.$render=function(){if(l.multiple&&!angular.isArray(m.$viewValue)){if(!angular.isUndefined(m.$viewValue)&&null!==m.$viewValue)throw d("multiarr","Expected model value to be array but got '{0}'",m.$viewValue);l.selected=[]}l.selected=m.$viewValue},b.on("click",k),c.$on("$destroy",function(){b.off("click",k)}),j(c,function(a){var b=angular.element("<div>").append(a),c=b.querySelectorAll(".ui-select-match");if(c.removeAttr("ui-select-match"),1!==c.length)throw d("transcluded","Expected 1 .ui-select-match but got '{0}'.",c.length);g.querySelectorAll(".ui-select-match").replaceWith(c);var e=b.querySelectorAll(".ui-select-choices");if(e.removeAttr("ui-select-choices"),1!==e.length)throw d("transcluded","Expected 1 .ui-select-choices but got '{0}'.",e.length);g.querySelectorAll(".ui-select-choices").replaceWith(e)})}}}]).directive("uiSelectChoices",["uiSelectConfig","RepeatParser","uiSelectMinErr","$compile",function(a,b,c,d){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(b){var c=b.parent().attr("theme")||a.theme;return c+"/choices.tpl.html"},compile:function(e,f){if(!f.repeat)throw c("repeat","Expected 'repeat' expression.");return function(e,f,g,h,i){var j=g.groupBy;if(h.parseRepeatAttr(g.repeat,j),h.disableChoiceExpression=g.uiDisableChoice,j){var k=f.querySelectorAll(".ui-select-choices-group");if(1!==k.length)throw c("rows","Expected 1 .ui-select-choices-group but got '{0}'.",k.length);k.attr("ng-repeat",b.getGroupNgRepeatExpression())}var l=f.querySelectorAll(".ui-select-choices-row");if(1!==l.length)throw c("rows","Expected 1 .ui-select-choices-row but got '{0}'.",l.length);l.attr("ng-repeat",b.getNgRepeatExpression(h.parserResult.itemName,"$select.items",h.parserResult.trackByExp,j)).attr("ng-mouseenter","$select.setActiveItem("+h.parserResult.itemName+")").attr("ng-click","$select.select("+h.parserResult.itemName+")");var m=f.querySelectorAll(".ui-select-choices-row-inner");if(1!==m.length)throw c("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",m.length);m.attr("uis-transclude-append",""),d(f,i)(e),e.$watch("$select.search",function(a){a&&!h.open&&h.multiple&&h.activate(!1,!0),h.activeIndex=0,h.refresh(g.refresh)}),g.$observe("refreshDelay",function(){var b=e.$eval(g.refreshDelay);h.refreshDelay=void 0!==b?b:a.refreshDelay})}}}}]).directive("uisTranscludeAppend",function(){return{link:function(a,b,c,d,e){e(a,function(a){b.append(a)})}}}).directive("uiSelectMatch",["uiSelectConfig",function(a){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(b){var c=b.parent().attr("theme")||a.theme,d=b.parent().attr("multiple");return c+(d?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(b,c,d,e){d.$observe("placeholder",function(b){e.placeholder=void 0!==b?b:a.placeholder}),e.multiple&&e.sizeSearchInput()}}}]).filter("highlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c&&b?b.replace(new RegExp(a(c),"gi"),'<span class="ui-select-highlight">$&</span>'):b}})}(),angular.module("ui.select").run(["$templateCache",function(a){a.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content dropdown-menu" role="menu" aria-labelledby="dLabel" ng-show="$select.items.length > 0"><li class="ui-select-choices-group"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header">{{$group.name}}</div><div class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><a href="javascript:void(0)" class="ui-select-choices-row-inner"></a></div></li></ul>'),a.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span style="margin-right: 3px;" class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$select.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$select.activeMatchIndex === $index}"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$select.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),a.put("bootstrap/match.tpl.html",'<button type="button" class="btn btn-default form-control ui-select-match" tabindex="-1" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}" ;="" ng-click="$select.activate()"><span ng-show="$select.searchEnabled && $select.isEmpty()" class="text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" ng-transclude=""></span> <span class="caret ui-select-toggle" ng-click="$select.toggle($event)"></span></button>'),a.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search"></div><div class="ui-select-choices"></div></div>'),a.put("bootstrap/select.tpl.html",'<div class="ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),a.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.isGrouped}"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label select2-result-label">{{$group.name}}</div><ul ng-class="{\'select2-result-sub\': $select.isGrouped, \'select2-result-single\': !$select.isGrouped}"><li class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),a.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$select.activeMatchIndex === $index}"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$select.removeChoice($index)" tabindex="-1"></a></li></span>'),a.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.activate()"><span ng-show="$select.searchEnabled && $select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <span class="select2-arrow ui-select-toggle" ng-click="$select.toggle($event)"><b></b></span></a>'),a.put("select2/select-multiple.tpl.html",'<div class="ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open\': $select.open,\n                \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="select2-input ui-select-search" placeholder="{{$select.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;"></li></ul><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),a.put("select2/select.tpl.html",'<div class="select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open\': $select.open,\n                \'select2-container-disabled\': $select.disabled,\n                \'select2-container-active\': $select.focus }"><div class="ui-select-match"></div><div class="select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),a.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header">{{$group.name}}</div><div class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),a.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),a.put("selectize/select.tpl.html",'<div class="selectize-control single"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled"></div><div class="ui-select-choices"></div></div>')}]);